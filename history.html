<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Recording History</title>
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <link rel="stylesheet" href="history.css">
  </head>
  <body>
    <script src="transcription/base-service.js"></script>
    <script src="transcription/gemini-service.js"></script>
    <script src="transcription/service-factory.js"></script>
    <!-- API Key Modal -->
    <div id="apiKeyModal" class="modal-overlay" style="display: none;">
      <div class="modal-container">
        <div class="modal-header">
          <h2><i class="fas fa-key"></i> Enter Gemini API Key</h2>
          <p class="modal-subtitle">Required for transcription</p>
        </div>
        <div class="modal-body">
          <p class="modal-description">
            Get your free API key from Google AI Studio to enable transcription features.
          </p>
          <div class="modal-steps">
            <div class="step">
              <span class="step-number">1</span>
              <span class="step-text">Visit <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></span>
            </div>
            <div class="step">
              <span class="step-number">2</span>
              <span class="step-text">Click "Create API key"</span>
            </div>
            <div class="step">
              <span class="step-number">3</span>
              <span class="step-text">Paste your API key below</span>
            </div>
          </div>
          <div class="modal-info-box">
            <i class="fas fa-gift"></i>
            <div>
              <strong>Free Tier Included</strong><br>
              15 requests/minute • 1500 requests/day • No credit card required
            </div>
          </div>
          <div class="modal-input-group">
            <label for="modalApiKeyInput">API Key</label>
            <div class="modal-api-key-input">
              <input
                type="password"
                id="modalApiKeyInput"
                placeholder="AIza..."
                autocomplete="off"
              >
              <button id="modalToggleApiKey" class="modal-icon-button" title="Show/Hide">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="modalCancelBtn" class="modal-btn modal-btn-secondary">
            <i class="fas fa-times"></i> Cancel
          </button>
          <button id="modalSaveBtn" class="modal-btn modal-btn-primary">
            <i class="fas fa-save"></i> Save & Continue
          </button>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="header">
        <div class="header-content">
          <h1><i class="fas fa-music"></i> Recording History</h1>
          <p class="subtitle">Manage and play your audio recordings</p>
        </div>
        <div class="header-actions">
          <button id="uploadButton" class="upload-button" title="Upload Audio">
            <i class="fas fa-plus"></i> Add Audio
          </button>
          <button id="settingsButton" class="settings-link" title="Settings">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </div>

      <!-- Drag and Drop Zone -->
      <div id="dropZone" class="drop-zone" style="display: none;">
        <div class="drop-zone-content">
          <i class="fas fa-cloud-upload-alt"></i>
          <h3>Drop audio files here</h3>
          <p>or click to browse</p>
          <p class="drop-zone-formats">Supported: MP3, WAV, OGG, WEBM, M4A</p>
        </div>
      </div>

      <div id="emptyState" class="empty-state" style="display: none;">
        <div class="empty-icon">
          <i class="fas fa-microphone"></i>
        </div>
        <h2>No Recordings Yet</h2>
        <p>Start recording or upload audio files to see them here</p>
        <button id="emptyUploadButton" class="empty-upload-button">
          <i class="fas fa-plus"></i> Upload Audio Files
        </button>
      </div>
      <div id="historyList" class="history-list"></div>
    </div>

    <!-- Hidden file input -->
    <input type="file" id="fileInput" accept="audio/*" multiple style="display: none;">
    <script src="history.js"></script>
  </body>
</html>